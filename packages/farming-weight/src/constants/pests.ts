import { Crop } from './crops.js';

export enum Pest {
	Beetle = 'beetle',
	Cricket = 'cricket',
	Worm = 'worm',
	Fly = 'fly',
	Locust = 'locust',
	Mite = 'mite',
	Mosquito = 'mosquito',
	Moth = 'moth',
	Rat = 'rat',
	Slug = 'slug',
	Mouse = 'mouse',
	Dragonfly = 'dragonfly',
	Firefly = 'firefly',
	Mantis = 'mantis',
}

export const FORTUNE_PER_PEST_BRACKET = 0.4;

const killsPerPestBracket: Record<number, number> = {
	1: 1,
	2: 2,
	3: 3,
	4: 5,
	5: 7,
	6: 9,
	7: 14,
	8: 17,
	9: 21,
	10: 25,
	11: 50,
	12: 80,
	13: 125,
	14: 175,
	15: 250,
};

export const BESTIARY_PEST_BRACKETS: Record<Pest, Record<number, number>> = {
	[Pest.Beetle]: killsPerPestBracket,
	[Pest.Cricket]: killsPerPestBracket,
	[Pest.Worm]: killsPerPestBracket,
	[Pest.Fly]: killsPerPestBracket,
	[Pest.Locust]: killsPerPestBracket,
	[Pest.Mite]: killsPerPestBracket,
	[Pest.Mosquito]: killsPerPestBracket,
	[Pest.Moth]: killsPerPestBracket,
	[Pest.Rat]: killsPerPestBracket,
	[Pest.Slug]: killsPerPestBracket,
	[Pest.Mouse]: {
		1: 1,
		2: 2,
		3: 3,
		4: 5,
		5: 7,
		6: 9,
		7: 11,
		8: 14,
		9: 17,
		10: 20,
		11: 30,
		12: 40,
		13: 55,
		14: 75,
		15: 100,
	},
	[Pest.Dragonfly]: killsPerPestBracket,
	[Pest.Firefly]: killsPerPestBracket,
	[Pest.Mantis]: killsPerPestBracket,
};

export const PEST_EXCHANGE_RATES = {
	0: 0,
	1: 10,
	2: 20,
	3: 30,
	4: 40,
	5: 50,
	6: 60,
	7: 70,
	8: 80,
	9: 90,
	10: 100,
	11: 105,
	12: 110,
	13: 115,
	14: 120,
	15: 125,
	16: 130,
	17: 135,
	18: 140,
	19: 145,
	20: 150,
	21: 153,
	22: 156,
	23: 159,
	24: 162,
	25: 165,
	26: 168,
	27: 171,
	28: 174,
	29: 177,
	30: 180,
	31: 182,
	32: 184,
	33: 186,
	34: 188,
	35: 190,
	36: 192,
	37: 194,
	38: 196,
	39: 198,
	40: 200,
};

export const PEST_IDS: Pest[] = [
	Pest.Beetle,
	Pest.Cricket,
	Pest.Worm,
	Pest.Fly,
	Pest.Locust,
	Pest.Mite,
	Pest.Mosquito,
	Pest.Moth,
	Pest.Rat,
	Pest.Slug,
	Pest.Mouse,
	Pest.Dragonfly,
	Pest.Firefly,
	Pest.Mantis,
];

export const PEST_BESTIARY_IDS: Record<Pest, string> = {
	[Pest.Beetle]: Pest.Beetle,
	[Pest.Cricket]: Pest.Cricket,
	[Pest.Worm]: Pest.Worm,
	[Pest.Fly]: Pest.Fly,
	[Pest.Locust]: Pest.Locust,
	[Pest.Mite]: Pest.Mite,
	[Pest.Mosquito]: Pest.Mosquito,
	[Pest.Moth]: Pest.Moth,
	[Pest.Rat]: Pest.Rat,
	[Pest.Slug]: Pest.Slug,
	[Pest.Mouse]: Pest.Mouse,
	[Pest.Dragonfly]: Pest.Dragonfly,
	[Pest.Firefly]: Pest.Firefly,
	[Pest.Mantis]: 'praying_mantis', // oops
};

export const PEST_TO_CROP: Partial<Record<Pest, Crop>> = {
	mite: Crop.Cactus,
	cricket: Crop.Carrot,
	moth: Crop.CocoaBeans,
	worm: Crop.Melon,
	slug: Crop.Mushroom,
	beetle: Crop.NetherWart,
	locust: Crop.Potato,
	rat: Crop.Pumpkin,
	mosquito: Crop.SugarCane,
	fly: Crop.Wheat,
	dragonfly: Crop.Sunflower,
	firefly: Crop.Moonflower,
	mantis: Crop.WildRose,
};

export const CROP_TO_PEST: Record<Crop, Pest> = {
	[Crop.Cactus]: Pest.Mite,
	[Crop.Carrot]: Pest.Cricket,
	[Crop.CocoaBeans]: Pest.Moth,
	[Crop.Melon]: Pest.Worm,
	[Crop.Mushroom]: Pest.Slug,
	[Crop.NetherWart]: Pest.Beetle,
	[Crop.Potato]: Pest.Locust,
	[Crop.Pumpkin]: Pest.Rat,
	[Crop.SugarCane]: Pest.Mosquito,
	[Crop.Wheat]: Pest.Fly,
	[Crop.Seeds]: Pest.Fly,
	[Crop.Sunflower]: Pest.Dragonfly,
	[Crop.Moonflower]: Pest.Firefly,
	[Crop.WildRose]: Pest.Mantis,
};

export const PEST_COLLECTION_BRACKETS = [0, 50, 100, 250, 500, 750, 1000];

// Taken from https://api.elitebot.dev/weights/all
export const PEST_COLLECTION_ADJUSTMENTS: Omit<Record<Pest, Record<number, number>>, Pest.Mouse> = {
	mite: {
		'0': 0,
		'50': 392.81451,
		'100': 669.92375,
		'250': 947.033,
		'500': 1224.14223,
		'750': 1390.40778,
		'1000': 1556.67335,
		'5000': 1778.36074,
	},
	cricket: {
		'0': 0,
		'50': 489.75238,
		'100': 902.70476,
		'250': 1315.65714,
		'500': 1728.60951,
		'750': 1976.38094,
		'1000': 2224.15239,
		'5000': 2554.51429,
	},
	moth: {
		'0': 0,
		'50': 298.18964,
		'100': 495.41087,
		'250': 692.63211,
		'500': 889.85334,
		'750': 1008.18609,
		'1000': 1126.51884,
		'5000': 1284.29583,
	},
	worm: {
		'0': 0,
		'50': 213.57277,
		'100': 364.23674,
		'250': 514.9007,
		'500': 665.56466,
		'750': 755.96304,
		'1000': 846.36143,
		'5000': 966.89259,
	},
	slug: {
		'0': 0,
		'50': 167.24639,
		'100': 285.22962,
		'250': 403.21285,
		'500': 521.19607,
		'750': 591.986,
		'1000': 662.77594,
		'5000': 757.16252,
	},
	beetle: {
		'0': 0,
		'50': 853.9207,
		'100': 1428.26244,
		'250': 2002.60421,
		'500': 2576.94593,
		'750': 2921.55098,
		'1000': 3266.15608,
		'5000': 3725.62946,
	},
	locust: {
		'0': 0,
		'50': 593.16202,
		'100': 1049.22929,
		'250': 1505.29657,
		'500': 1961.36382,
		'750': 2235.00418,
		'1000': 2508.64457,
		'5000': 2873.49838,
	},
	rat: {
		'0': 0,
		'50': 14.10777,
		'100': 24.06004,
		'250': 34.0123,
		'500': 43.96457,
		'750': 49.93593,
		'1000': 55.90729,
		'5000': 63.8691,
	},
	mosquito: {
		'0': 0,
		'50': 20.58415,
		'100': 35.10514,
		'250': 49.62613,
		'500': 64.14713,
		'750': 72.85973,
		'1000': 81.57232,
		'5000': 93.18912,
	},
	fly: {
		'0': 0,
		'50': 0,
		'100': 0,
		'250': 0,
		'500': 0,
		'750': 0,
		'1000': 0,
		'5000': 0,
	},
	dragonfly: {
		'0': 0,
		'50': 0,
		'100': 0,
		'250': 0,
		'500': 0,
		'750': 0,
		'1000': 0,
		'5000': 0,
	},
	firefly: {
		'0': 0,
		'50': 0,
		'100': 0,
		'250': 0,
		'500': 0,
		'750': 0,
		'1000': 0,
		'5000': 0,
	},
	mantis: {
		'0': 0,
		'50': 0,
		'100': 0,
		'250': 0,
		'500': 0,
		'750': 0,
		'1000': 0,
		'5000': 0,
	},
};
